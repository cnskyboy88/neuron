<div style="margin-top:20px">
	<button style="padding:5px;" id="button">点击获取姓名(成功)</button><input style="margin-left:20px;width:200px;padding:2px"id="text" type="text"/>
</div>


<div style="margin-top:20px">
	<button style="padding:5px;"  id="button1">点击获取姓名(失败--ajax请求成功)</button><input style="margin-left:20px;width:200px;padding:2px"id="text1" type="text"/>
</div>

<div style="margin-top:20px">
	<button style="padding:5px;"  id="button2">点击获取姓名(失败--ajax请求失败)</button><input style="margin-left:20px;width:200px;padding:2px"id="text2" type="text"/>
</div>


<script>

var _button = NR.DOM("#button"),
		_text  = NR.DOM("#text"),
		_button1 = NR.DOM("#button1"),
		_text1  = NR.DOM("#text1"),
		_button2 = NR.DOM("#button2"),
		_text2  = NR.DOM("#text2");
		
		

		NR.provide(["io/ajax"],function(K,Ajax){
	
				
				function ajaxEvent(){



						//成功ajax请求，status=200
						_button.on("click",function(){
						new Ajax({
				    url: 'success.json',
				    data: {

						}
						}).on({
						    success: function(json){
						    		var code =  json.code,
						    				data = json.msg || "";

						        if(code && code === 200){
						           _text.val(data.name || "");
						        }else{
						            _text.val('获取值失败');
						        }
						    },
						    error: function(){
						        _text.val('http status 不在 [200, 300)之内');
						    }
						}).send();
					});


						//成功ajax请求,status返回值不为200
						_button1.on("click",function(){
						new Ajax({
				    url: 'fail.json',
				    data: {

						}
						}).on({
						    success: function(json){
						    		var code =  json.code,
						    				data = json.msg || "";

						        if(code && code === 200){
						           _text1.val(data.name || "");
						        }else{
						            _text1.val(data.error);
						        }
						    },
						    error: function(){
						        _text1.val('http status 不在 [200, 300)之内');
						    }
						}).send();
					});


						//失败ajax请求
						_button2.on("click",function(){
						new Ajax({
				    url: 'no-exist.json',
				    data: {

						}
						}).on({
						    success: function(json){
						    		var code =  json.code,
						    				data = json.msg || "";

						        if(code && code === 200){
						           _text2.val(data.name || "");
						        }else{
						            _text2.val(data.error);
						        }
						    },
						    error: function(){
						        _text2.val('http status 不在 [200, 300)之内');
						    }
						}).send();
					});


				}
		

				ajaxEvent();

		});
		



	

</script>